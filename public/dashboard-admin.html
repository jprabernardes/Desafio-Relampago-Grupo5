<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Administrador</title>
    <script src="/server10/config.js"></script>
    <script src="/server10/js/base-path.js"></script>
    <link rel="stylesheet" href="/server10/css/dashboard-admin.css" />
  </head>
  <body class="closed-menu">
    <div class="container">
      <div class="sidebar">
        <div class="logo">ğŸ’ª FitManager</div>
        <div class="nav-item active" id="navAlunos" onclick="loadTab('alunos')">
          <i class="fas fa-user-graduate"></i> ğŸ‘¥ Alunos
        </div>
        <div
          class="nav-item"
          id="navFuncionarios"
          onclick="loadTab('funcionarios')"
        >
          <i class="fas fa-user-tie"></i> ğŸ‹ï¸ FuncionÃ¡rios
        </div>
        <div style="flex: 1"></div>
        <div class="logout-btn" onclick="logout()">ğŸšª Sair</div>
      </div>

    <div class="main-content">
      <div class="header">
        <h1>Dashboard - Administrador</h1>
        <div class="user-info">
          <span id="userName"></span>
          <div class="user-avatar" id="userAvatar"></div>
        </div>
      </div>

      <div class="table-container">
        <div class="table-header">
          <h2 id="tableTitle">UsuÃ¡rios do Sistema</h2>
          <div class="flex-center-gap">
            <input type="text" id="searchInput" placeholder="Pesquisar..." class="search-input"
              oninput="handleSearch()" />
            <button class="btn btn-primary" onclick="openAddModal()">
              + Adicionar Conta
            </button>
          </div>
        </div>
        <table>
          <thead id="tableHead">
            <tr>
              <th>Nome</th>
              <th>Email</th>
              <th>CPF</th>
              <th>FunÃ§Ã£o</th>
              <th>AÃ§Ãµes</th>
            </tr>
          </thead>
          <tbody id="usersTable"></tbody>
        </table>
        <div id="paginationContainer"></div>
      </div>
    </div>
  </div>

  <!-- Modal Adicionar -->
  <div class="modal" id="addModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="addModalTitle">Adicionar Conta</h2>
        <button class="close-btn" onclick="closeAddModal()">&times;</button>
      </div>
      <div id="addAlertContainer"></div>
      <form id="addForm">
        <div class="form-group">
          <label>Nome *</label>
          <input type="text" id="addNome" required />
        </div>
        <div class="form-group">
          <label>Email *</label>
          <input type="email" id="addEmail" required />
        </div>
        <div class="form-group">
          <label>Senha *</label>
          <input type="password" id="addSenha" required minlength="6" />
        </div>
        <div class="form-group" id="addCpfGroup">
          <label>CPF *</label>
          <input type="text" id="addCpf" required maxlength="11" placeholder="11 dÃ­gitos" />
        </div>
        <div class="form-group">
          <label>Telefone</label>
          <input type="text" id="addTelefone" placeholder="(XX)9XXXXXXXX" />
        </div>
        <div class="form-group hidden" id="addRoleGroup">
          <label>FunÃ§Ã£o *</label>
          <select id="addRole">
            <option value="">Selecione...</option>
            <option value="administrador">ğŸ‘‘ Administrador</option>
            <option value="recepcionista">ğŸ“‹ Recepcionista</option>
            <option value="instrutor">ğŸ’ª Instrutor</option>
            <option value="aluno">ğŸƒ Aluno</option>
          </select>
        </div>
        <div class="form-group hidden" id="addTipoPlanoGroup">
          <label>Tipo de Plano *</label>
          <select id="addTipoPlano">
            <option value="">Carregando planos...</option>
          </select>

        </div>
        <div class="form-group hidden" id="addTipoFuncionarioGroup">
          <label>FunÃ§Ã£o *</label>
          <select id="addTipoFuncionario">
            <option value="">Selecione...</option>
            <option value="administrador">ğŸ‘‘ Administrador</option>
            <option value="recepcionista">ğŸ“‹ Recepcionista</option>
            <option value="instrutor">ğŸ’ª Instrutor</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="button" class="btn" onclick="closeAddModal()">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Editar -->
  <div class="modal" id="editModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="editModalTitle">Editar Conta</h2>
        <button class="close-btn" onclick="closeEditModal()">&times;</button>
      </div>
      <div id="editAlertContainer"></div>
      <form id="editForm">
        <input type="hidden" id="editUserId" />
        <div class="form-group">
          <label>Nome *</label>
          <input type="text" id="editNome" required />
        </div>
        <div class="form-group">
          <label>Email *</label>
          <input type="email" id="editEmail" required />
        </div>
        <div class="form-group">
          <label>Telefone</label>
          <input type="text" id="editTelefone" placeholder="(XX)9XXXXXXXX" />
        </div>
        <div class="form-group hidden" id="editNovaSenhaGroup">
          <label>Nova Senha (deixe em branco para nÃ£o alterar)</label>
          <input type="password" id="editNovaSenha" minlength="6" placeholder="Digite nova senha" />
        </div>
        <div class="form-group" id="editCpfGroup">
          <label>CPF *</label>
          <input type="text" id="editCpf" required maxlength="11" />
        </div>
        <div class="form-group hidden" id="editRoleGroup">
          <label>FunÃ§Ã£o *</label>
          <select id="editRole">
            <option value="administrador">ğŸ‘‘ Administrador</option>
            <option value="recepcionista">ğŸ“‹ Recepcionista</option>
            <option value="instrutor">ğŸ’ª Instrutor</option>
            <option value="aluno">ğŸƒ Aluno</option>
          </select>
        </div>
        <div class="form-group hidden" id="editTipoPlanoGroup">
          <label>Tipo de Plano *</label>
          <select id="editTipoPlano">
            <option value="">Selecione...</option>
            <option value="mensal">Mensal</option>
            ...
          </select>

        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-danger" onclick="confirmDeleteUser()">
            Deletar Conta
          </button>
          <div style="flex: 1"></div>
          <button type="button" class="btn" onclick="closeEditModal()">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="confirmModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ConfirmaÃ§Ã£o</h2>
        <button class="close-btn" onclick="closeConfirmModal()">
          &times;
        </button>
      </div>
      <p id="confirmMessage" class="confirm-modal-message">Tem certeza?</p>
      <div class="form-actions">
        <button class="btn" onclick="closeConfirmModal()">NÃ£o</button>
        <button class="btn btn-danger" onclick="confirmAction()">
          Sim, tenho certeza
        </button>
      </div>
    </div>
    <script src="/server10/js/app-config.js"></script>
    <script src="/server10/js/api.js"></script>
    <script src="/server10/js/pagination.js"></script>
    <script src="/server10/js/dashboard-admin.js"></script>
  </body>
</html>
